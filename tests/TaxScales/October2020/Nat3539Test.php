<?php

namespace ManageIt\PaygTax\Tests\TaxScales\October2020;

use ManageIt\PaygTax\PaygTax;
use ManageIt\PaygTax\Tests\Fixtures\Earning;
use ManageIt\PaygTax\Tests\Fixtures\Payee;
use ManageIt\PaygTax\Tests\Fixtures\Payer;
use PHPUnit\Framework\TestCase;
use PHPUnit\Framework\Assert;

/**
 * @covers \ManageIt\PaygTax\TaxScales\Nat3539
 */
class Nat3539Test extends TestCase
{
    /**
     * @dataProvider weeklyData
     */
    public function testWeeklyWithholding(
        int $gross,
        float $scale1,
        float $scale2,
        float $scale3,
        float $scale5,
        float $scale6
    ): void {
        $payer = new Payer();

        $payee = new Payee();
        $payee->payCycle = Payee::PAY_CYCLE_WEEKLY;
        $payee->residencyStatus = Payee::RESIDENT;
        $payee->tfn = true;
        $payee->claimsTaxFreeThreshold = false;
        $payee->stsl = true;

        $earning = new Earning();
        $earning->date = new \DateTime('2020-10-15');
        $earning->gross = $gross;

        // Scale 1

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale1, $payg->getTaxWithheldAmount());

        // Scale 2

        $payee->claimsTaxFreeThreshold = true;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale2, $payg->getTaxWithheldAmount());

        // Scale 3

        $payee->residencyStatus = Payee::FOREIGN_RESIDENT;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale3, $payg->getTaxWithheldAmount());

        // Scale 5

        $payee->residencyStatus = Payee::RESIDENT;
        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_FULL;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale5, $payg->getTaxWithheldAmount());

        // Scale 6

        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_HALF;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale6, $payg->getTaxWithheldAmount());
    }

    /**
     * @return array<int, array<int|float, int|float>>
     */
    public function weeklyData(): array
    {
        return [
            [87, 17.00, 0.00, 28.00, 0.00, 0.00],
            [88, 17.00, 0.00, 29.00, 0.00, 0.00],
            [116, 24.00, 0.00, 38.00, 0.00, 0.00],
            [117, 24.00, 0.00, 38.00, 0.00, 0.00],
            [249, 55.00, 0.00, 81.00, 0.00, 0.00],
            [250, 55.00, 0.00, 81.00, 0.00, 0.00],
            [358, 80.00, 0.00, 116.00, 0.00, 0.00],
            [359, 81.00, 0.00, 117.00, 0.00, 0.00],
            [370, 83.00, 2.00, 120.00, 2.00, 2.00],
            [371, 83.00, 2.00, 121.00, 2.00, 2.00],
            [437, 98.00, 15.00, 142.00, 15.00, 15.00],
            [438, 98.00, 15.00, 142.00, 15.00, 15.00],
            [514, 115.00, 37.00, 167.00, 30.00, 30.00],
            [515, 115.00, 37.00, 167.00, 30.00, 30.00],
            [545, 125.00, 46.00, 177.00, 35.00, 35.00],
            [546, 131.00, 46.00, 177.00, 36.00, 36.00],
            [547, 132.00, 47.00, 178.00, 36.00, 36.00],
            [548, 132.00, 47.00, 178.00, 36.00, 36.00],
            [684, 181.00, 76.00, 222.00, 62.00, 62.00],
            [685, 188.00, 76.00, 223.00, 62.00, 62.00],
            [720, 201.00, 83.00, 234.00, 69.00, 69.00],
            [721, 201.00, 83.00, 234.00, 69.00, 69.00],
            [739, 208.00, 87.00, 240.00, 72.00, 72.00],
            [740, 208.00, 87.00, 240.00, 73.00, 73.00],
            [746, 210.00, 89.00, 242.00, 74.00, 74.00],
            [747, 214.00, 89.00, 243.00, 74.00, 74.00],
            [812, 239.00, 103.00, 264.00, 87.00, 91.00],
            [813, 243.00, 103.00, 264.00, 87.00, 91.00],
            [864, 262.00, 115.00, 281.00, 97.00, 104.00],
            [865, 263.00, 115.00, 281.00, 98.00, 104.00],
            [881, 269.00, 120.00, 286.00, 103.00, 110.00],
            [882, 273.00, 121.00, 287.00, 103.00, 110.00],
            [895, 278.00, 125.00, 291.00, 107.00, 115.00],
            [896, 279.00, 135.00, 300.00, 117.00, 125.00],
            [923, 289.00, 144.00, 309.00, 126.00, 135.00],
            [924, 290.00, 145.00, 310.00, 126.00, 135.00],
            [931, 292.00, 147.00, 312.00, 129.00, 138.00],
            [932, 293.00, 148.00, 312.00, 129.00, 138.00],
            [955, 301.00, 156.00, 320.00, 137.00, 146.00],
            [956, 307.00, 156.00, 320.00, 137.00, 147.00],
            [1034, 337.00, 184.00, 346.00, 163.00, 174.00],
            [1035, 342.00, 195.00, 357.00, 174.00, 184.00],
            [1097, 366.00, 223.00, 384.00, 201.00, 212.00],
            [1117, 374.00, 230.00, 391.00, 208.00, 219.00],
            [1118, 380.00, 231.00, 391.00, 208.00, 220.00],
            [1162, 397.00, 247.00, 407.00, 224.00, 236.00],
            [1163, 398.00, 253.00, 413.00, 230.00, 242.00],
            [1165, 399.00, 254.00, 414.00, 231.00, 243.00],
            [1205, 414.00, 269.00, 428.00, 245.00, 257.00],
            [1206, 421.00, 270.00, 428.00, 246.00, 258.00],
            [1232, 431.00, 286.00, 444.00, 261.00, 273.00],
            [1281, 451.00, 304.00, 461.00, 279.00, 292.00],
            [1282, 451.00, 305.00, 462.00, 279.00, 292.00],
            [1298, 458.00, 311.00, 467.00, 285.00, 298.00],
            [1299, 465.00, 311.00, 468.00, 285.00, 298.00],
            [1305, 467.00, 314.00, 470.00, 287.00, 300.00],
            [1306, 467.00, 320.00, 477.00, 294.00, 307.00],
            [1384, 499.00, 350.00, 505.00, 323.00, 337.00],
            [1385, 499.00, 358.00, 512.00, 330.00, 344.00],
            [1397, 504.00, 362.00, 517.00, 335.00, 348.00],
            [1398, 512.00, 363.00, 517.00, 335.00, 349.00],
            [1467, 540.00, 390.00, 543.00, 360.00, 375.00],
            [1468, 540.00, 398.00, 551.00, 368.00, 383.00],
            [1502, 554.00, 411.00, 563.00, 381.00, 396.00],
            [1503, 562.00, 411.00, 564.00, 381.00, 396.00],
            [1555, 584.00, 432.00, 583.00, 401.00, 416.00],
            [1556, 584.00, 440.00, 591.00, 409.00, 424.00],
            [1614, 608.00, 463.00, 613.00, 431.00, 447.00],
            [1615, 617.00, 464.00, 614.00, 431.00, 447.00],
            [1648, 631.00, 477.00, 626.00, 444.00, 460.00],
            [1649, 631.00, 485.00, 635.00, 452.00, 469.00],
            [1731, 666.00, 519.00, 666.00, 484.00, 501.00],
            [1732, 675.00, 519.00, 667.00, 484.00, 502.00],
            [1747, 681.00, 525.00, 673.00, 490.00, 508.00],
            [1748, 681.00, 534.00, 682.00, 499.00, 517.00],
            [1844, 722.00, 574.00, 719.00, 537.00, 555.00],
            [1845, 723.00, 574.00, 720.00, 537.00, 556.00],
            [1852, 726.00, 577.00, 722.00, 540.00, 558.00],
            [1853, 726.00, 587.00, 732.00, 550.00, 568.00],
            [1854, 726.00, 587.00, 732.00, 550.00, 569.00],
            [1855, 736.00, 587.00, 733.00, 550.00, 569.00],
            [1956, 780.00, 629.00, 773.00, 590.00, 610.00],
            [1957, 780.00, 630.00, 773.00, 591.00, 610.00],
            [1964, 783.00, 633.00, 776.00, 593.00, 613.00],
            [1965, 784.00, 643.00, 786.00, 604.00, 623.00],
            [1989, 795.00, 653.00, 796.00, 613.00, 633.00],
            [1990, 806.00, 653.00, 796.00, 614.00, 634.00],
            [2081, 849.00, 692.00, 832.00, 650.00, 671.00],
            [2082, 850.00, 703.00, 843.00, 661.00, 682.00],
            [2119, 868.00, 718.00, 858.00, 676.00, 697.00],
            [2120, 868.00, 719.00, 859.00, 676.00, 697.00],
            [2129, 872.00, 722.00, 862.00, 680.00, 701.00],
            [2130, 884.00, 723.00, 863.00, 680.00, 702.00],
            [2204, 919.00, 754.00, 893.00, 710.00, 732.00],
            [2205, 920.00, 766.00, 904.00, 722.00, 744.00],
            [2278, 955.00, 797.00, 934.00, 752.00, 774.00],
            [2279, 967.00, 798.00, 934.00, 752.00, 775.00],
            [2306, 980.00, 809.00, 946.00, 763.00, 786.00],
            [2307, 981.00, 810.00, 946.00, 764.00, 787.00],
            [2339, 997.00, 825.00, 961.00, 778.00, 801.00],
            [2340, 997.00, 837.00, 973.00, 790.00, 814.00],
            [2479, 1065.00, 904.00, 1037.00, 854.00, 879.00],
            [2480, 1066.00, 917.00, 1050.00, 867.00, 892.00],
            [2490, 1071.00, 922.00, 1054.00, 872.00, 897.00],
            [2491, 1071.00, 922.00, 1055.00, 872.00, 897.00],
            [2628, 1138.00, 988.00, 1119.00, 936.00, 962.00],
            [2629, 1139.00, 1002.00, 1132.00, 949.00, 976.00],
            [2652, 1150.00, 1013.00, 1143.00, 960.00, 987.00],
            [2653, 1150.00, 1014.00, 1144.00, 961.00, 987.00],
            [2736, 1191.00, 1055.00, 1183.00, 1000.00, 1027.00],
            [2737, 1192.00, 1055.00, 1183.00, 1000.00, 1028.00],
            [2898, 1270.00, 1134.00, 1259.00, 1076.00, 1105.00],
            [2899, 1271.00, 1134.00, 1259.00, 1076.00, 1105.00],
            [2913, 1278.00, 1141.00, 1266.00, 1083.00, 1112.00],
            [2914, 1278.00, 1142.00, 1266.00, 1083.00, 1113.00],
            [3110, 1374.00, 1238.00, 1358.00, 1176.00, 1207.00],
            [3111, 1375.00, 1238.00, 1359.00, 1176.00, 1207.00],
            [3461, 1574.00, 1410.00, 1523.00, 1341.00, 1375.00],
        ];
    }

    /**
     * @dataProvider fortnightlyData
     */
    public function testFortnightlyWithholding(
        int $gross,
        float $scale1,
        float $scale2,
        float $scale3,
        float $scale5,
        float $scale6
    ): void {
        $payer = new Payer();

        $payee = new Payee();
        $payee->payCycle = Payee::PAY_CYCLE_FORTNIGHTLY;
        $payee->residencyStatus = Payee::RESIDENT;
        $payee->tfn = true;
        $payee->claimsTaxFreeThreshold = false;
        $payee->stsl = true;

        $earning = new Earning();
        $earning->date = new \DateTime('2020-10-15');
        $earning->gross = $gross;

        // Scale 1

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale1, $payg->getTaxWithheldAmount());

        // Scale 2

        $payee->claimsTaxFreeThreshold = true;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale2, $payg->getTaxWithheldAmount());

        // Scale 3

        $payee->residencyStatus = Payee::FOREIGN_RESIDENT;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale3, $payg->getTaxWithheldAmount());

        // Scale 5

        $payee->residencyStatus = Payee::RESIDENT;
        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_FULL;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale5, $payg->getTaxWithheldAmount());

        // Scale 6

        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_HALF;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale6, $payg->getTaxWithheldAmount());
    }

    /**
     * @return array<int, array<int|float, int|float>>
     */
    public function fortnightlyData(): array
    {
        return [
            [174, 34.00, 0.00, 56.00, 0.00, 0.00],
            [176, 34.00, 0.00, 58.00, 0.00, 0.00],
            [232, 48.00, 0.00, 76.00, 0.00, 0.00],
            [234, 48.00, 0.00, 76.00, 0.00, 0.00],
            [498, 110.00, 0.00, 162.00, 0.00, 0.00],
            [500, 110.00, 0.00, 162.00, 0.00, 0.00],
            [716, 160.00, 0.00, 232.00, 0.00, 0.00],
            [718, 162.00, 0.00, 234.00, 0.00, 0.00],
            [740, 166.00, 4.00, 240.00, 4.00, 4.00],
            [742, 166.00, 4.00, 242.00, 4.00, 4.00],
            [874, 196.00, 30.00, 284.00, 30.00, 30.00],
            [876, 196.00, 30.00, 284.00, 30.00, 30.00],
            [1028, 230.00, 74.00, 334.00, 60.00, 60.00],
            [1030, 230.00, 74.00, 334.00, 60.00, 60.00],
            [1090, 250.00, 92.00, 354.00, 70.00, 70.00],
            [1092, 262.00, 92.00, 354.00, 72.00, 72.00],
            [1094, 264.00, 94.00, 356.00, 72.00, 72.00],
            [1096, 264.00, 94.00, 356.00, 72.00, 72.00],
            [1368, 362.00, 152.00, 444.00, 124.00, 124.00],
            [1370, 376.00, 152.00, 446.00, 124.00, 124.00],
            [1440, 402.00, 166.00, 468.00, 138.00, 138.00],
            [1442, 402.00, 166.00, 468.00, 138.00, 138.00],
            [1478, 416.00, 174.00, 480.00, 144.00, 144.00],
            [1480, 416.00, 174.00, 480.00, 146.00, 146.00],
            [1492, 420.00, 178.00, 484.00, 148.00, 148.00],
            [1494, 428.00, 178.00, 486.00, 148.00, 148.00],
            [1624, 478.00, 206.00, 528.00, 174.00, 182.00],
            [1626, 486.00, 206.00, 528.00, 174.00, 182.00],
            [1728, 524.00, 230.00, 562.00, 194.00, 208.00],
            [1730, 526.00, 230.00, 562.00, 196.00, 208.00],
            [1762, 538.00, 240.00, 572.00, 206.00, 220.00],
            [1764, 546.00, 242.00, 574.00, 206.00, 220.00],
            [1790, 556.00, 250.00, 582.00, 214.00, 230.00],
            [1792, 558.00, 270.00, 600.00, 234.00, 250.00],
            [1846, 578.00, 288.00, 618.00, 252.00, 270.00],
            [1848, 580.00, 290.00, 620.00, 252.00, 270.00],
            [1862, 584.00, 294.00, 624.00, 258.00, 276.00],
            [1864, 586.00, 296.00, 624.00, 258.00, 276.00],
            [1910, 602.00, 312.00, 640.00, 274.00, 292.00],
            [1912, 614.00, 312.00, 640.00, 274.00, 294.00],
            [2068, 674.00, 368.00, 692.00, 326.00, 348.00],
            [2070, 684.00, 390.00, 714.00, 348.00, 368.00],
            [2194, 732.00, 446.00, 768.00, 402.00, 424.00],
            [2234, 748.00, 460.00, 782.00, 416.00, 438.00],
            [2236, 760.00, 462.00, 782.00, 416.00, 440.00],
            [2324, 794.00, 494.00, 814.00, 448.00, 472.00],
            [2326, 796.00, 506.00, 826.00, 460.00, 484.00],
            [2330, 798.00, 508.00, 828.00, 462.00, 486.00],
            [2410, 828.00, 538.00, 856.00, 490.00, 514.00],
            [2412, 842.00, 540.00, 856.00, 492.00, 516.00],
            [2464, 862.00, 572.00, 888.00, 522.00, 546.00],
            [2562, 902.00, 608.00, 922.00, 558.00, 584.00],
            [2564, 902.00, 610.00, 924.00, 558.00, 584.00],
            [2596, 916.00, 622.00, 934.00, 570.00, 596.00],
            [2598, 930.00, 622.00, 936.00, 570.00, 596.00],
            [2610, 934.00, 628.00, 940.00, 574.00, 600.00],
            [2612, 934.00, 640.00, 954.00, 588.00, 614.00],
            [2768, 998.00, 700.00, 1010.00, 646.00, 674.00],
            [2770, 998.00, 716.00, 1024.00, 660.00, 688.00],
            [2794, 1008.00, 724.00, 1034.00, 670.00, 696.00],
            [2796, 1024.00, 726.00, 1034.00, 670.00, 698.00],
            [2934, 1080.00, 780.00, 1086.00, 720.00, 750.00],
            [2936, 1080.00, 796.00, 1102.00, 736.00, 766.00],
            [3004, 1108.00, 822.00, 1126.00, 762.00, 792.00],
            [3006, 1124.00, 822.00, 1128.00, 762.00, 792.00],
            [3110, 1168.00, 864.00, 1166.00, 802.00, 832.00],
            [3112, 1168.00, 880.00, 1182.00, 818.00, 848.00],
            [3228, 1216.00, 926.00, 1226.00, 862.00, 894.00],
            [3230, 1234.00, 928.00, 1228.00, 862.00, 894.00],
            [3296, 1262.00, 954.00, 1252.00, 888.00, 920.00],
            [3298, 1262.00, 970.00, 1270.00, 904.00, 938.00],
            [3462, 1332.00, 1038.00, 1332.00, 968.00, 1002.00],
            [3464, 1350.00, 1038.00, 1334.00, 968.00, 1004.00],
            [3494, 1362.00, 1050.00, 1346.00, 980.00, 1016.00],
            [3496, 1362.00, 1068.00, 1364.00, 998.00, 1034.00],
            [3688, 1444.00, 1148.00, 1438.00, 1074.00, 1110.00],
            [3690, 1446.00, 1148.00, 1440.00, 1074.00, 1112.00],
            [3704, 1452.00, 1154.00, 1444.00, 1080.00, 1116.00],
            [3706, 1452.00, 1174.00, 1464.00, 1100.00, 1136.00],
            [3708, 1452.00, 1174.00, 1464.00, 1100.00, 1138.00],
            [3710, 1472.00, 1174.00, 1466.00, 1100.00, 1138.00],
            [3912, 1560.00, 1258.00, 1546.00, 1180.00, 1220.00],
            [3914, 1560.00, 1260.00, 1546.00, 1182.00, 1220.00],
            [3928, 1566.00, 1266.00, 1552.00, 1186.00, 1226.00],
            [3930, 1568.00, 1286.00, 1572.00, 1208.00, 1246.00],
            [3978, 1590.00, 1306.00, 1592.00, 1226.00, 1266.00],
            [3980, 1612.00, 1306.00, 1592.00, 1228.00, 1268.00],
            [4162, 1698.00, 1384.00, 1664.00, 1300.00, 1342.00],
            [4164, 1700.00, 1406.00, 1686.00, 1322.00, 1364.00],
            [4238, 1736.00, 1436.00, 1716.00, 1352.00, 1394.00],
            [4240, 1736.00, 1438.00, 1718.00, 1352.00, 1394.00],
            [4258, 1744.00, 1444.00, 1724.00, 1360.00, 1402.00],
            [4260, 1768.00, 1446.00, 1726.00, 1360.00, 1404.00],
            [4408, 1838.00, 1508.00, 1786.00, 1420.00, 1464.00],
            [4410, 1840.00, 1532.00, 1808.00, 1444.00, 1488.00],
            [4556, 1910.00, 1594.00, 1868.00, 1504.00, 1548.00],
            [4558, 1934.00, 1596.00, 1868.00, 1504.00, 1550.00],
            [4612, 1960.00, 1618.00, 1892.00, 1526.00, 1572.00],
            [4614, 1962.00, 1620.00, 1892.00, 1528.00, 1574.00],
            [4678, 1994.00, 1650.00, 1922.00, 1556.00, 1602.00],
            [4680, 1994.00, 1674.00, 1946.00, 1580.00, 1628.00],
            [4958, 2130.00, 1808.00, 2074.00, 1708.00, 1758.00],
            [4960, 2132.00, 1834.00, 2100.00, 1734.00, 1784.00],
            [4980, 2142.00, 1844.00, 2108.00, 1744.00, 1794.00],
            [4982, 2142.00, 1844.00, 2110.00, 1744.00, 1794.00],
            [5256, 2276.00, 1976.00, 2238.00, 1872.00, 1924.00],
            [5258, 2278.00, 2004.00, 2264.00, 1898.00, 1952.00],
            [5304, 2300.00, 2026.00, 2286.00, 1920.00, 1974.00],
            [5306, 2300.00, 2028.00, 2288.00, 1922.00, 1974.00],
            [5472, 2382.00, 2110.00, 2366.00, 2000.00, 2054.00],
            [5474, 2384.00, 2110.00, 2366.00, 2000.00, 2056.00],
            [5796, 2540.00, 2268.00, 2518.00, 2152.00, 2210.00],
            [5798, 2542.00, 2268.00, 2518.00, 2152.00, 2210.00],
            [5826, 2556.00, 2282.00, 2532.00, 2166.00, 2224.00],
            [5828, 2556.00, 2284.00, 2532.00, 2166.00, 2226.00],
            [6220, 2748.00, 2476.00, 2716.00, 2352.00, 2414.00],
            [6222, 2750.00, 2476.00, 2718.00, 2352.00, 2414.00],
            [6922, 3148.00, 2820.00, 3046.00, 2682.00, 2750.00],
        ];
    }

    /**
     * @dataProvider monthlyData
     */
    public function testMonthlyWithholding(
        float $gross,
        float $scale1,
        float $scale2,
        float $scale3,
        float $scale5,
        float $scale6
    ): void {
        $payer = new Payer();

        $payee = new Payee();
        $payee->payCycle = Payee::PAY_CYCLE_MONTHLY;
        $payee->residencyStatus = Payee::RESIDENT;
        $payee->tfn = true;
        $payee->claimsTaxFreeThreshold = false;
        $payee->stsl = true;

        $earning = new Earning();
        $earning->date = new \DateTime('2020-10-15');
        $earning->gross = $gross;

        // Scale 1

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale1, $payg->getTaxWithheldAmount());

        // Scale 2

        $payee->claimsTaxFreeThreshold = true;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale2, $payg->getTaxWithheldAmount());

        // Scale 3

        $payee->residencyStatus = Payee::FOREIGN_RESIDENT;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale3, $payg->getTaxWithheldAmount());

        // Scale 5

        $payee->residencyStatus = Payee::RESIDENT;
        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_FULL;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale5, $payg->getTaxWithheldAmount());

        // Scale 6

        $payee->medicareLevyExemption = Payee::MEDICARE_LEVY_EXEMPTION_HALF;

        $payg = PaygTax::new()
            ->setPayer($payer)
            ->setPayee($payee)
            ->setEarning($earning);

        Assert::assertEquals($scale6, $payg->getTaxWithheldAmount());
    }

    /**
     * @return array<int, array<int|float, int|float>>
     */
    public function monthlyData(): array
    {
        return [
            [377.00, 74.00, 0.00, 121.00, 0.00, 0.00],
            [381.33, 74.00, 0.00, 126.00, 0.00, 0.00],
            [502.67, 104.00, 0.00, 165.00, 0.00, 0.00],
            [507.00, 104.00, 0.00, 165.00, 0.00, 0.00],
            [1079.00, 238.00, 0.00, 351.00, 0.00, 0.00],
            [1083.33, 238.00, 0.00, 351.00, 0.00, 0.00],
            [1551.33, 347.00, 0.00, 503.00, 0.00, 0.00],
            [1555.67, 351.00, 0.00, 507.00, 0.00, 0.00],
            [1603.33, 360.00, 9.00, 520.00, 9.00, 9.00],
            [1607.67, 360.00, 9.00, 524.00, 9.00, 9.00],
            [1893.67, 425.00, 65.00, 615.00, 65.00, 65.00],
            [1898.00, 425.00, 65.00, 615.00, 65.00, 65.00],
            [2227.33, 498.00, 160.00, 724.00, 130.00, 130.00],
            [2231.67, 498.00, 160.00, 724.00, 130.00, 130.00],
            [2361.67, 542.00, 199.00, 767.00, 152.00, 152.00],
            [2366.00, 568.00, 199.00, 767.00, 156.00, 156.00],
            [2370.33, 572.00, 204.00, 771.00, 156.00, 156.00],
            [2374.67, 572.00, 204.00, 771.00, 156.00, 156.00],
            [2964.00, 784.00, 329.00, 962.00, 269.00, 269.00],
            [2968.33, 815.00, 329.00, 966.00, 269.00, 269.00],
            [3120.00, 871.00, 360.00, 1014.00, 299.00, 299.00],
            [3124.33, 871.00, 360.00, 1014.00, 299.00, 299.00],
            [3202.33, 901.00, 377.00, 1040.00, 312.00, 312.00],
            [3206.67, 901.00, 377.00, 1040.00, 316.00, 316.00],
            [3232.67, 910.00, 386.00, 1049.00, 321.00, 321.00],
            [3237.00, 927.00, 386.00, 1053.00, 321.00, 321.00],
            [3518.67, 1036.00, 446.00, 1144.00, 377.00, 394.00],
            [3523.00, 1053.00, 446.00, 1144.00, 377.00, 394.00],
            [3744.00, 1135.00, 498.00, 1218.00, 420.00, 451.00],
            [3748.33, 1140.00, 498.00, 1218.00, 425.00, 451.00],
            [3817.67, 1166.00, 520.00, 1239.00, 446.00, 477.00],
            [3822.00, 1183.00, 524.00, 1244.00, 446.00, 477.00],
            [3878.33, 1205.00, 542.00, 1261.00, 464.00, 498.00],
            [3882.67, 1209.00, 585.00, 1300.00, 507.00, 542.00],
            [3999.67, 1252.00, 624.00, 1339.00, 546.00, 585.00],
            [4004.00, 1257.00, 628.00, 1343.00, 546.00, 585.00],
            [4034.33, 1265.00, 637.00, 1352.00, 559.00, 598.00],
            [4038.67, 1270.00, 641.00, 1352.00, 559.00, 598.00],
            [4138.33, 1304.00, 676.00, 1387.00, 594.00, 633.00],
            [4142.67, 1330.00, 676.00, 1387.00, 594.00, 637.00],
            [4480.67, 1460.00, 797.00, 1499.00, 706.00, 754.00],
            [4485.00, 1482.00, 845.00, 1547.00, 754.00, 797.00],
            [4753.67, 1586.00, 966.00, 1664.00, 871.00, 919.00],
            [4840.33, 1621.00, 997.00, 1694.00, 901.00, 949.00],
            [4844.67, 1647.00, 1001.00, 1694.00, 901.00, 953.00],
            [5035.33, 1720.00, 1070.00, 1764.00, 971.00, 1023.00],
            [5039.67, 1725.00, 1096.00, 1790.00, 997.00, 1049.00],
            [5048.33, 1729.00, 1101.00, 1794.00, 1001.00, 1053.00],
            [5221.67, 1794.00, 1166.00, 1855.00, 1062.00, 1114.00],
            [5226.00, 1824.00, 1170.00, 1855.00, 1066.00, 1118.00],
            [5338.67, 1868.00, 1239.00, 1924.00, 1131.00, 1183.00],
            [5551.00, 1954.00, 1317.00, 1998.00, 1209.00, 1265.00],
            [5555.33, 1954.00, 1322.00, 2002.00, 1209.00, 1265.00],
            [5624.67, 1985.00, 1348.00, 2024.00, 1235.00, 1291.00],
            [5629.00, 2015.00, 1348.00, 2028.00, 1235.00, 1291.00],
            [5655.00, 2024.00, 1361.00, 2037.00, 1244.00, 1300.00],
            [5659.33, 2024.00, 1387.00, 2067.00, 1274.00, 1330.00],
            [5997.33, 2162.00, 1517.00, 2188.00, 1400.00, 1460.00],
            [6001.67, 2162.00, 1551.00, 2219.00, 1430.00, 1491.00],
            [6053.67, 2184.00, 1569.00, 2240.00, 1452.00, 1508.00],
            [6058.00, 2219.00, 1573.00, 2240.00, 1452.00, 1512.00],
            [6357.00, 2340.00, 1690.00, 2353.00, 1560.00, 1625.00],
            [6361.33, 2340.00, 1725.00, 2388.00, 1595.00, 1660.00],
            [6508.67, 2401.00, 1781.00, 2440.00, 1651.00, 1716.00],
            [6513.00, 2435.00, 1781.00, 2444.00, 1651.00, 1716.00],
            [6738.33, 2531.00, 1872.00, 2526.00, 1738.00, 1803.00],
            [6742.67, 2531.00, 1907.00, 2561.00, 1772.00, 1837.00],
            [6994.00, 2635.00, 2006.00, 2656.00, 1868.00, 1937.00],
            [6998.33, 2674.00, 2011.00, 2661.00, 1868.00, 1937.00],
            [7141.33, 2734.00, 2067.00, 2713.00, 1924.00, 1993.00],
            [7145.67, 2734.00, 2102.00, 2752.00, 1959.00, 2032.00],
            [7501.00, 2886.00, 2249.00, 2886.00, 2097.00, 2171.00],
            [7505.33, 2925.00, 2249.00, 2890.00, 2097.00, 2175.00],
            [7570.33, 2951.00, 2275.00, 2916.00, 2123.00, 2201.00],
            [7574.67, 2951.00, 2314.00, 2955.00, 2162.00, 2240.00],
            [7990.67, 3129.00, 2487.00, 3116.00, 2327.00, 2405.00],
            [7995.00, 3133.00, 2487.00, 3120.00, 2327.00, 2409.00],
            [8025.33, 3146.00, 2500.00, 3129.00, 2340.00, 2418.00],
            [8029.67, 3146.00, 2544.00, 3172.00, 2383.00, 2461.00],
            [8034.00, 3146.00, 2544.00, 3172.00, 2383.00, 2466.00],
            [8038.33, 3189.00, 2544.00, 3176.00, 2383.00, 2466.00],
            [8476.00, 3380.00, 2726.00, 3350.00, 2557.00, 2643.00],
            [8480.33, 3380.00, 2730.00, 3350.00, 2561.00, 2643.00],
            [8510.67, 3393.00, 2743.00, 3363.00, 2570.00, 2656.00],
            [8515.00, 3397.00, 2786.00, 3406.00, 2617.00, 2700.00],
            [8619.00, 3445.00, 2830.00, 3449.00, 2656.00, 2743.00],
            [8623.33, 3493.00, 2830.00, 3449.00, 2661.00, 2747.00],
            [9017.67, 3679.00, 2999.00, 3605.00, 2817.00, 2908.00],
            [9022.00, 3683.00, 3046.00, 3653.00, 2864.00, 2955.00],
            [9182.33, 3761.00, 3111.00, 3718.00, 2929.00, 3020.00],
            [9186.67, 3761.00, 3116.00, 3722.00, 2929.00, 3020.00],
            [9225.67, 3779.00, 3129.00, 3735.00, 2947.00, 3038.00],
            [9230.00, 3831.00, 3133.00, 3740.00, 2947.00, 3042.00],
            [9550.67, 3982.00, 3267.00, 3870.00, 3077.00, 3172.00],
            [9555.00, 3987.00, 3319.00, 3917.00, 3129.00, 3224.00],
            [9871.33, 4138.00, 3454.00, 4047.00, 3259.00, 3354.00],
            [9875.67, 4190.00, 3458.00, 4047.00, 3259.00, 3358.00],
            [9992.67, 4247.00, 3506.00, 4099.00, 3306.00, 3406.00],
            [9997.00, 4251.00, 3510.00, 4099.00, 3311.00, 3410.00],
            [10135.67, 4320.00, 3575.00, 4164.00, 3371.00, 3471.00],
            [10140.00, 4320.00, 3627.00, 4216.00, 3423.00, 3527.00],
            [10742.33, 4615.00, 3917.00, 4494.00, 3701.00, 3809.00],
            [10746.67, 4619.00, 3974.00, 4550.00, 3757.00, 3865.00],
            [10790.00, 4641.00, 3995.00, 4567.00, 3779.00, 3887.00],
            [10794.33, 4641.00, 3995.00, 4572.00, 3779.00, 3887.00],
            [11388.00, 4931.00, 4281.00, 4849.00, 4056.00, 4169.00],
            [11392.33, 4936.00, 4342.00, 4905.00, 4112.00, 4229.00],
            [11492.00, 4983.00, 4390.00, 4953.00, 4160.00, 4277.00],
            [11496.33, 4983.00, 4394.00, 4957.00, 4164.00, 4277.00],
            [11856.00, 5161.00, 4572.00, 5126.00, 4333.00, 4450.00],
            [11860.33, 5165.00, 4572.00, 5126.00, 4333.00, 4455.00],
            [12558.00, 5503.00, 4914.00, 5456.00, 4663.00, 4788.00],
            [12562.33, 5508.00, 4914.00, 5456.00, 4663.00, 4788.00],
            [12623.00, 5538.00, 4944.00, 5486.00, 4693.00, 4819.00],
            [12627.33, 5538.00, 4949.00, 5486.00, 4693.00, 4823.00],
            [13476.67, 5954.00, 5365.00, 5885.00, 5096.00, 5230.00],
            [13481.00, 5958.00, 5365.00, 5889.00, 5096.00, 5230.00],
            [14997.67, 6821.00, 6110.00, 6600.00, 5811.00, 5958.00],
        ];
    }
}
